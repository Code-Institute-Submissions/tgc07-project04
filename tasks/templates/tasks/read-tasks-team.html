{% extends 'base-template.html' %}

{% block title %}Team {{ membership.team }}'s Tasks{% endblock %}

{% block nav_page_specific_is_authenticated %}
    {% if membership.is_admin %}
        <li class="nav-item active">
            <a class="nav-link" href="{% url 'team_memberships_route' team_id=membership.team.id %}">{{ membership.team }}'s memberships</a>
        </li>
        <li class="nav-item active">
            <a class="nav-link" href="{% url 'create_membership_route' team_id=membership.team.id %}">Add team member</a>
        </li>
    {% endif %}
        <li class="nav-item active">
            <a class="nav-link" href="{% url 'checkout_select_subscription_route' team_id=membership.team.id %}">{{ membership.team }}'s subscription</a>
        </li>
{% endblock %}

{% block content %}

    {% if membership.is_admin %}
        <a href="{% url 'team_memberships_route' team_id=membership.team.id %}" class="btn btn-light">{{ membership.team }}'s memberships</a>
        <a href="{% url 'create_membership_route' team_id=membership.team.id %}" class="btn btn-light">Add team member</a>
    {% endif %}

    <a href="{% url 'checkout_select_subscription_route' team_id=membership.team.id %}" class="btn btn-light">{{ membership.team }}'s subscription</a>

    <form method="GET">
        {% load crispy_forms_tags %}
        {{filter_tasks_form|crispy}}
        <input type="submit" class="btn btn-primary" value="Filter"/>
        <a href="{% url 'tasks_team_route' team_id=membership.team.id %}" class="btn btn-success">Reset Search</a>
    </form>

    <div class="tasks-main">
        <input type="hidden" name="{{ team_id }}" id="is_authenticated" value="{{request.user.is_authenticated}}">
        {% include 'tasks/base-kanban-template.html' %}
    </div>
    
{% endblock %}